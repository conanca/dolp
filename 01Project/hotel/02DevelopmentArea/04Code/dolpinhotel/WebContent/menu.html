<script type="text/javascript">
$(function() {
	$("#west-grid").jqGrid({
		height: "auto",
		//autowidth: true, 为适应IE6而注掉此句
		treeGrid: true,
		treeGridModel: 'nested',
		pager: false,
		ExpandColumn: "name",
		ExpandColClick: true,
		treeIcons: {leaf:'ui-icon-document-b'},
		datatype: "json",
		jsonReader:{
	   		repeatitems: false
        },
	    loadComplete: function(){
			$.addMessage($(this).getUserData());
    	},
		rowNum: 200,
		caption: "",
		url: "dispMenu",
		colNames: ["id","功能菜单","url","description"],
		colModel: [
			{name: "id",width:0,hidden:true,key:true},
			{name: "name", width:180, resizable: false, sortable:false},
			{name: "url",width:0,hidden:true},
			{name: "description",width:0,hidden:true}
		],
		onSelectRow: function(id) {
			var treedata = $(this).getRowData(id);
			if(treedata.isLeaf=="true") {
				//treedata.url
				var st = "#t"+treedata.id;
				if($(st).html() != null ) {
					maintab.tabs('select',st);
				} else {
					maintab.tabs('add',st, treedata.name);
					$(st,"#tabs").load(treedata.url);
				}
				$(st).css("height", "390");
			}
		}
	});
});
</script>
<table id="west-grid"></table>