<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Login page</title>
<script src="js/jquery-1.4.4.min.js" type="text/javascript"></script>
<script src="js/jquery-ui-1.8.6.custom.min.js" type="text/javascript"></script>
<script src="js/system.common.js" type="text/javascript"></script>
<script src="js/jquery.pnotify.min.js" type="text/javascript"></script>
<script src="js/jquery.validate.min.js" type="text/javascript"></script>
<script src="js/i18n/messages_cn.js" type="text/javascript"></script>
<link href="themes/redmond/jquery-ui-1.8.6.custom.css" rel="stylesheet" type="text/css"/>
<link href="css/jquery.pnotify.default.css" rel="stylesheet" type="text/css"/>
<link href="css/jquery.validate.css" rel="stylesheet" type="text/css"/>
<link href="css/main.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
$(function() {
	$("#login").dialog( { draggable: false } );
	$("input:submit,input:reset").button();

	opts.pnotify_title = "消息";
	opts.pnotify_type = "notice";
	opts.pnotify_text = "登录账号：1000/123";
	$.pnotify(opts);

	// 验证
	$("#logonForm").validate({
		rules: {
			num: {
				required: true,
				number: true,
				minlength: 4,
				maxlength: 4
			},
			pwd: {
				required: true,
				minlength: 3
			}
		}
	});

	$('#logonForm').submit(function() {
		if($(this).valid()){
			var url = 'system/user/login';
			var logonFormInfo = $(this).serializeObject();
			$.getJSON(url,logonFormInfo,function(response){
				if(null==response){
					window.location.href="main.html";
				}else{
					$('#logonForm')[0].reset();
					$.addMessage(response.userdata);
				}
			});
		}else{
			$.addMessageStr(null,"未通过验证",null);
		}
		return false;
	});
});
</script>
</head>
<body>
<div id="login" title="请登录">
	<form id="logonForm" action="#">
		<br/>
		用户编号：
		<input type="text" name="num"/><br/><br/>
		密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码：
		<input type="password" name="pwd"/><br/><br/>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="submit" value="登录"/>
		&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="reset" value="重置"/>
	</form>
</div>
</body>
</html>